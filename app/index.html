<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>E-Barrio</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/materialize/dist/css/materialize.css" />
    <link rel="stylesheet" href="bower_components/toastr/toastr.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body ng-app="ebarrioApp">
    <!--[if lte IE 8]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Add your site or application content here -->
    <!-- <div class="header">
      <div class="navbar navbar-default" role="navigation">
        <div class="container">
          <div class="navbar-header">

            <a class="navbar-brand" href="#/">ebarrio</a>
          </div>

          <div class="collapse">

            <ul class="nav navbar-nav">
              <li class="active"><a href="#/">Home</a></li>
              <li><a ng-href="#/about">About</a></li>
              <li><a ng-href="#/">Contact</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div> -->
<script type="text/javascript">
//<![CDATA[
function makeArray() {
for (i = 0; i<makeArray.arguments.length; i++)
this[i + 1] = makeArray.arguments[i];}
var months = new makeArray('Enero','Febrero','Marzo','Abril','Mayo',
'Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre');
var date = new Date();
var day = date.getDate();
var month = date.getMonth() + 1;
var yy = date.getYear();
var year = (yy < 1000) ? yy + 1900 : yy;
document.write("Hoy es " + day + " de " + months[month] + " del " + year);
//]]>
// modulo para crear graficos de tipo gauge, cada funcion puede crear infinitos graficos, pero para mejorar 
// la vista del usuario se realizaran un grafico por cada funcion. 
</script>
<!-- <script src="http://www.amcharts.com/lib/3/plugins/dataloader/dataloader.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
    
    <!-- <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawChartHumedad);
      function drawChartHumedad() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Humedad', 0],
         
        ]);
        var options = {
          width: 250, height: 250,
          max: 100, min: 0,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90 ,
          minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('humedadUno'));
        chart.draw(data, options);
        setInterval(function() {
            var JSON=$.ajax({
                url:"https://api.mlab.com/api/1/databases/efficientmdb/collections/Condensacion?apiKey=7K2Y6doZUobEqRHLROy1D26_rHQOL89B",
                dataType: 'json',
                async: false}).responseText;
            var Respuesta=jQuery.parseJSON(JSON);
            
          data.setValue(0, 1,Respuesta[1].humedad);
          chart.draw(data, options);
        }, 1300);
        
      }

      google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawChartTemperatura);
      function drawChartTemperatura() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Temperatura', 0]
         
        ]);
        var options = {
          width: 250, height: 250,
          max: 70, min: 0,
          redFrom: 60, redTo: 70,
          yellowFrom:45, yellowTo: 60 ,
          minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('temperaturaUno'));
        chart.draw(data, options);
        setInterval(function() {
            var JSON=$.ajax({
                url:"https://api.mlab.com/api/1/databases/efficientmdb/collections/Condensacion?apiKey=7K2Y6doZUobEqRHLROy1D26_rHQOL89B",
                dataType: 'json',
                async: false}).responseText;
            var Respuesta=jQuery.parseJSON(JSON);
            
          data.setValue(0, 1,Respuesta[1].temperatura);
          chart.draw(data, options);
        }, 1300);
        
      }
      google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawChartHumedadDos);
      function drawChartHumedadDos() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Humedad', 0],
         
        ]);
        var options = {
          width: 250, height: 250,
          max: 100, min: 0,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90 ,
          minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('humedadDos'));
        chart.draw(data, options);
        setInterval(function() {
            var JSON=$.ajax({
                url:"https://api.mlab.com/api/1/databases/efficientmdb/collections/Condensacion?apiKey=7K2Y6doZUobEqRHLROy1D26_rHQOL89B",
                dataType: 'json',
                async: false}).responseText;
            var Respuesta=jQuery.parseJSON(JSON);
            
          data.setValue(0, 1,Respuesta[2].humedad);
          chart.draw(data, options);
        }, 1300);
        
      }

      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChartTemperaturaDos);
      function drawChartTemperaturaDos() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Temperatura', 0]
         
        ]);
        var options = {
          width: 250, height: 250,
          max: 70, min: 0,
          redFrom: 60, redTo: 70,
          yellowFrom:45, yellowTo: 60 ,
          minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('temperaturaDos'));
        chart.draw(data, options);
        setInterval(function() {
            var JSON=$.ajax({
                url:"https://api.mlab.com/api/1/databases/efficientmdb/collections/Condensacion?apiKey=7K2Y6doZUobEqRHLROy1D26_rHQOL89B",
                dataType: 'json',
                async: false}).responseText;
            var Respuesta=jQuery.parseJSON(JSON);
            
          data.setValue(0, 1,Respuesta[2].temperatura);
          chart.draw(data, options);
        }, 1300);
        
      }

       google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawChartEfficient);
      function drawChartEfficient() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Kwh', 0]
         
        ]);
        var options = {
          width: 200, height: 200,
          max: 1000, min: 0,
          redFrom: 900, redTo: 1000,
          yellowFrom:750, yellowTo: 900 ,
          minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('Efficient'));
        chart.draw(data, options);
        setInterval(function() {
            var JSON=$.ajax({
                url:"https://api.mlab.com/api/1/databases/efficientmdb/collections/ConsumoMes?apiKey=7K2Y6doZUobEqRHLROy1D26_rHQOL89B",
                dataType: 'json',
                async: false}).responseText;
            var Respuesta=jQuery.parseJSON(JSON);
            
          data.setValue(0, 1,Respuesta[2].kwh);
          chart.draw(data, options);
        }, 1300);
        
      }
       google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChartEfficientDos);
      function drawChartEfficientDos() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Costo', 0]
         
        ]);
        var options = {
          width: 200, height: 200,
          max: 130000, min: 0,
          redFrom: 115000, redTo: 130000,
          yellowFrom:90000, yellowTo: 115000 ,
          minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('EfficientDos'));
        chart.draw(data, options);
        setInterval(function() {
            var JSON=$.ajax({
                url:"https://api.mlab.com/api/1/databases/efficientmdb/collections/ConsumoMes?apiKey=7K2Y6doZUobEqRHLROy1D26_rHQOL89B",
                dataType: 'json',
                async: false}).responseText;
            var Respuesta=jQuery.parseJSON(JSON);
            
          data.setValue(0, 1,Respuesta[2].costokwh);
          chart.draw(data, options);
        }, 1300);
        
      }
      // Load the Visualization API and the line package.
      google.charts.load('current', {'packages':['bar']});
      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);
  
    function drawChart() {
  
        $.ajax({
        type: 'POST',
        url: 'http://localhost:8080/BarrioAPI/consumohistorico/index_get',
          
        success: function (data1) {
        // Create our data table out of JSON data loaded from server.
        var data = new google.visualization.DataTable();
  
      data.addColumn('date', 'mes1');
      data.addColumn('date', 'mes2');
      data.addColumn('date', 'mes3');
      data.addColumn('date', 'mes4');
      data.addColumn('date', 'mes5');
      data.addColumn('date', 'mes6');
      data.addColumn('number', 'consumo_uno');
      data.addColumn('number', 'consumo_dos');
      data.addColumn('number', 'consumo_tres');
      data.addColumn('number', 'consumo_cuatro');
      data.addColumn('number', 'consumo_cinco');
      data.addColumn('number', 'consumo_seis');
        
      var jsonData = $.parseJSON(data1);
      
      for (var i = 0; i < jsonData.length; i++) {
            data.addRow([jsonData[i].mes_uno,jsonData[i].mes_dos,jsonData[i].mes_tres,jsonData[i].mes_cuatro,jsonData[i].mes_cinco,jsonData[i].mes_seis, parseInt(jsonData[i].consumo_uno), parseInt(jsonData[i].consumo_dos), parseInt(jsonData[i].consumo_tres), parseInt(jsonData[i].consumo_cuatro), parseInt(jsonData[i].consumo_cinco), parseInt(jsonData[i].consumo_seis)]);
      }
      var options = {
        chart: {
          title: 'Consumo historico',
          subtitle: 'Consumo kwh'
        },
        width: 900,
        height: 500,
        axes: {
          x: {
            0: {side: 'top'}
          }
        }
         
      };
      var chart = new google.charts.Bar(document.getElementById('bar_chart'));
      chart.draw(data, options);
       }
     });
    }

      
    </script>
 -->
    
    <div ng-view=""></div>
    

    

   <footer class="page-footer green darken-3">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <p class="grey-text text-lighten-4">Proyecto elaborado por Mauricio Arancibia, estudiante de ingeniería en computación e informática</p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links de interés</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="http://vinculacion.unab.cl" target="_blank">Dirección General de Vinculación con el Medio</a></li>
                  <li><a class="grey-text text-lighten-3" href="http://www.unab.cl" target="_blank">Universidad Andres Bello</a></li>
                  <!-- <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li> -->
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            © 2017 Copyright Mauricio Arancibia Soto
            <!-- <a class="grey-text text-lighten-4 right" href="#!">More Links</a> -->
            </div>
          </div>
        </footer>


    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
     <script>
       !function(A,n,g,u,l,a,r){A.GoogleAnalyticsObject=l,A[l]=A[l]||function(){
       (A[l].q=A[l].q||[]).push(arguments)},A[l].l=+new Date,a=n.createElement(g),
       r=n.getElementsByTagName(g)[0],a.src=u,r.parentNode.insertBefore(a,r)
       }(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-XXXXX-X');
       ga('send', 'pageview');
    </script>

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-aria/angular-aria.js"></script>
    <script src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script src="bower_components/angular-messages/angular-messages.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/angular-touch/angular-touch.js"></script>
    <script src="bower_components/materialize/dist/js/materialize.js"></script>
    <script src="bower_components/jquery-form-to-wizard/formToWizard.js"></script>
    <script src="bower_components/ng-file-upload/ng-file-upload.js"></script>
    <script src="bower_components/toastr/toastr.js"></script>
    <script src="bower_components/chart.js/dist/Chart.js"></script>
    <script src="bower_components/angular-chart.js/dist/angular-chart.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    
        
        <!-- build:js({.tmp,app}) scripts/scripts.js -->
        <script src="scripts/app.js"></script>
        <script src="scripts/controllers/main.js"></script>
        <script src="scripts/controllers/about.js"></script>
        <script src="scripts/controllers/login.js"></script>
        <script src="scripts/controllers/menu.js"></script>
        <script src="scripts/controllers/inicio.js"></script>
        <script src="scripts/controllers/casillaproyectos.js"></script>
        <script src="scripts/controllers/crearproyecto.js"></script>
        <script src="scripts/controllers/listaproyectos.js"></script>
        <script src="scripts/controllers/hcarbono.js"></script>
        <script src="scripts/controllers/registro.js"></script>
        <script src="scripts/controllers/editar.js"></script>
        <script src="scripts/controllers/detallecasilla.js"></script>
        <script src="scripts/controllers/proyectos.js"></script>
        <script src="scripts/controllers/efficient.js"></script>
        <script src="scripts/controllers/aportes.js"></script>
        <script src="scripts/controllers/loginadmin.js"></script>
        <script src="scripts/directives/maps.js"></script>
        <script src="scripts/controllers/ingresoconsumo.js"></script>
        <script src="scripts/controllers/reloj.js"></script>
        <script src="scripts/controllers/detalles.js"></script>
        <script src="scripts/controllers/subir.js"></script>
        <script src="scripts/controllers/consumoactual.js"></script>
        <script src="scripts/controllers/consumohistorico.js"></script>
        <script src="scripts/controllers/detalleconsumo.js"></script>
        <script src="scripts/controllers/efficienthome.js"></script>
        <script src="scripts/controllers/detallesproyecto.js"></script>
        <script src="scripts/services/almacenador.js"></script>
        <!-- endbuild -->
</body>
</html>
